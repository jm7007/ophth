<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache" />
    <title>JM안과</title>
    <link th:href="@{/css/main.css}" rel="stylesheet" />
    <link th:href="@{/css/join.css}" rel="stylesheet" />
</head>

<body class="background-img-1">

    <div id=top-nav></div>

    <div class="row">
        <div id="makeAcount">
            <form action="/join/new" method="post">
                <div class="join_row">
                    <h3 class="join_title"><label for="int_id">아이디</label></h3>
                    <span class="ps_box">
                        <input type="text" class="int_box" name="int_id" id="int_id" maxlength="20" required>
                    </span>
                    <span class="error_next_box" id="idMsg"></span>
                </div>
                <div class="join_row">
                    <h3 class="join_title"><label for="int_pw1">패스워드</label></h3>
                    <span class="ps_box">
                        <input type="password" class="int_box" name="int_pw1" id="int_pw1" maxlength="20" required>
                    </span>
                    <span class="error_next_box" id="idMsg"></span>
                    <h3 class="join_title"><label for="int_pw2">패스워드 재확인</label></h3>
                    <span class="ps_box">
                        <input type="password" class="int_box" name="int_pw2" id="int_pw2" maxlength="20" required>
                    </span>
                    <span class="error_next_box" id="idMsg"></span>
                </div>
                <div class="join_row">
                    <h3 class="join_title"><label for="int_name">이름</label></h3>
                    <span class="ps_box">
                        <input type="text" class="int_box" name="int_name" id="int_name" maxlength="20" required>
                    </span>
                </div>
                <div class="join_row">
                    <h3 class="join_title"><label for="int_email">메일</label></h3>
                    <span class="ps_box">
                        <input type="email" class="int_box" placeholder="abcd @ ... " name="int_email" id="int_email"
                            maxlength="40">
                    </span>
                </div>
                <div class="join_row">
                    <h3 class="join_title"><label for="int_yy">생년월일</label></h3>
                    <div class="bir_wrap">
                        <div class="bir_yy">
                            <span class="ps_box">
                                <input type="number" id="int_yy" name="int_yy" placeholder="Year(4자리)" class="int_box"
                                    maxlength="4" onfocusout="changeMaxDate()">
                            </span>
                        </div>
                        <div class="bir_mm">
                            <span class="ps_box">
                                <select id="int_mm" class="sel" name="int_mm" placeholder="Month" onchange="changeMaxDate()">
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5</option>
                                    <option value="6">6</option>
                                    <option value="7">7</option>
                                    <option value="8">8</option>
                                    <option value="9">9</option>
                                    <option value="10">10</option>
                                    <option value="11">11</option>
                                    <option value="12">12</option>
                                </select>
                            </span>
                        </div>
                        <div class="bir_dd">
                            <span class="ps_box">
                                <input type="number" id="int_dd" name="int_dd" placeholder="Day" class="int_box"
                                    maxlength="2" min="1" max="31">
                            </span>
                        </div>
                    </div>
                </div>
                <div class="join_row">
                    <h3 class="join_title"><label for="int_gender">성별</label></h3>
                    <span class="ps_box">
                        <select type="text" class="sel" name="int_gender" id="int_gender">
                            <option value="M">남자</option>
                            <option value="W">여자</option>
                            <option value="N">선택안함</option>
                        </select>
                    </span>
                </div>
                <div class="join_row">
                    <h3 class="join_title"><label for="int_contact">연락처</label></h3>
                    <span class="ps_box">
                        <input type="tel" class="int_box" placeholder="-를 제외하고 입력하세요" name="int_contact"
                            id="int_contact" maxlength="20" pattern="0[0-9]{1,2}[0-9]{7,8}">
                    </span>
                </div>
                <button type="submit" id="btnJoin" class="button1">
                    가입하기
                </button>
            </form>
        </div>
    </div>
    <!--session-->
    <div id="ss_account" class="hidden" th:text="${session.account}"></div>
    <div id="ss_admin" class="hidden" th:text="${session.admin}"></div>
    <!--/session-->
    <script src="/js/mainUI.js"></script>
    <script>
        //회원가입 생일 필터링
        const today = new Date();
        //150년 전부터 현재 연도 까지만 입력가능
        document.getElementById("int_yy").setAttribute("max",today.getFullYear());
        document.getElementById("int_yy").setAttribute("min",today.getFullYear()-150);
        //dayOfMonth에 0이나 말일 이상 입력 불가
        function changeMaxDate(){
            let yearValue = document.getElementById("int_yy").value;
            let monthValue = document.getElementById("int_mm").value;
            document.getElementById("int_dd").removeAttribute("max");
            document.getElementById("int_dd").setAttribute("max",(new Date((new Date(yearValue,((monthValue == "12") ? 1 : monthValue),1))-1)).getDate());
        }
    </script>
</body>

</html>