<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache" />
    <title>JM안과</title>
    <link th:href="@{/css/main.css}" rel="stylesheet" />
</head>

<body>
    <div id="top-nav"></div>
    <div class="body">
        <div class="wrapper">
            <div>
                <div>
                    <div th:replace="~{frag/inquiry::inquiry-ifdone-display}"></div>
                    <h1>[[${inquiry.inquiry_title}]]</h1>
                    <span id="inquiry-time"></span>
                </div>
                <pre>[[${inquiry.inquiry_content}]]</pre>
                <div th:if="${inquiry.inquiry_imageName != 'noimage.png'}">
                    <a><img th:src="${inquiry.inquiry_imagePath}"></a>
                </div>
                <pre th:if="${inquiry.inquiry_ifdone}" th:text="${inquiry.inquiry_answer}">답변이 왔을경우 답변내용생성</pre>
            </div>
            <div th:if="${session.admin}" th:unless="${inquiry.inquiry_ifdone}">
                <form action="/inquiry/answer" method="post">
                    <textarea name="inquiry_answer" placeholder="답변"></textarea>
                    <input name="inquiry_id" th:value="${inquiry.inquiry_id}" style="display:none;">
                    <input name="inquiry_ifdone" value="1" style="display:none;">
                    <input name="inquiry_adminUserId" th:value="${session.id}" style="display:none;">
                    <button type="submit">답변 등록</button>
                </form>
            </div>
            <div th:if="${session.admin}">
                <a href="/admin"><button>관리자 페이지로 돌아가기</button></a>
            </div>
        </div>
        <div id="footer"></div>
    </div>
    <!--session-->
    <div id="ss_id" class="hidden" th:text="${session.id}"></div>
    <div id="ss_name" class="hidden" th:text="${session.name}"></div>
    <div id="ss_admin" class="hidden" th:text="${session.admin}"></div>
    <!--/session-->
    <script type="text/javascript" th:src="@{/js/mainUI.js}"></script>
    <script th:inline="javascript">
        function simpleDateFormat(datetime) {
            let year = datetime.getFullYear().toString().substring(2, 4);
            let month = (datetime.getMonth() + 1 < 10) ? "0" + (datetime.getMonth() + 1) : datetime.getMonth() + 1;
            let date = (datetime.getDate() < 10) ? "0" + datetime.getDate() : datetime.getDate();
            let hour = (datetime.getHours() < 10) ? "0" + datetime.getHours() : datetime.getHours();
            let minute = (datetime.getMinutes() < 10) ? "0" + datetime.getMinutes() : datetime.getMinutes();
            return `${year}-${month}-${date} ${hour}:${minute}`
        }
        document.getElementById("inquiry-time").innerHTML = simpleDateFormat(new Date(/*[[${inquiry.inquiry_create_datetime}]]*/""));
    </script>
</body>

</html>